!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(1),i=function(){function t(e,n){return o(this,t),this._inputSelector=e,this._options=n,this._render(),this.root=null,this}return t.prototype._render=function(){var t=n(9).default;this.root=(0,r.render)((0,r.h)(t,{inputSelector:this._inputSelector,options:this._options}),document.body,this.root)},t.prototype.setOptions=function(t){this._options=t,this._render()},t.prototype.destroy=function(){ReactDOM.unmountComponentAtNode(this.root)},t}();window.PersooAutocomplete=i,window.persoo=window.persoo||{},window.persoo.getSuggestSource=function(t,e){return function(n,o){console.log('SuggestSource: sending request for query "'+n+"'."),persoo("send","suggest",{_w:"getAlgorithm",algorithmID:t,query:n,count:e},function(t){o(t.items.slice(0,e)||[])})}}},function(t,e,n){!function(t,n){n(e)}(this,function(t){function e(t,e,n){this.nodeName=t,this.attributes=e,this.children=n,this.key=e&&e.key}function n(t,n){var o,r,i,a,s=[];for(a=arguments.length;a-- >2;)q.push(arguments[a]);for(n&&n.children&&(q.length||q.push(n.children),delete n.children);q.length;)if((r=q.pop())instanceof Array)for(a=r.length;a--;)q.push(r[a]);else null!=r&&r!==!1&&("number"!=typeof r&&r!==!0||(r=String(r)),i="string"==typeof r,i&&o?s[s.length-1]+=r:(s.push(r),o=i));var u=new e(t,n||void 0,s);return L.vnode&&L.vnode(u),u}function o(t,e){if(e)for(var n in e)t[n]=e[n];return t}function r(t){return o({},t)}function i(t,e){for(var n=e.split("."),o=0;o<n.length&&t;o++)t=t[n[o]];return t}function a(t){return"function"==typeof t}function s(t){return"string"==typeof t}function u(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function c(t,e){return n(t.nodeName,o(r(t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}function l(t,e,n){var o=e.split(".");return function(e){for(var r=e&&e.target||this,a={},u=a,c=s(n)?i(e,n):r.nodeName?r.type.match(/^che|rad/)?r.checked:r.value:e,l=0;l<o.length-1;l++)u=u[o[l]]||(u[o[l]]=!l&&t.state[o[l]]||{});u[o[l]]=c,t.setState(a)}}function f(t){!t._dirty&&(t._dirty=!0)&&1==Q.push(t)&&(L.debounceRendering||z)(p)}function p(){var t,e=Q;for(Q=[];t=e.pop();)t._dirty&&k(t)}function d(t){var e=t&&t.nodeName;return e&&a(e)&&!(e.prototype&&e.prototype.render)}function h(t,e){return t.nodeName(y(t),e||F)}function v(t,e){return s(e)?t instanceof Text:s(e.nodeName)?m(t,e.nodeName):a(e.nodeName)?t._componentConstructor===e.nodeName||d(e):void 0}function m(t,e){return t.normalizedNodeName===e||W(t.nodeName)===W(e)}function y(t){var e=r(t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(n)for(var o in n)void 0===e[o]&&(e[o]=n[o]);return e}function g(t){var e=t.parentNode;e&&e.removeChild(t)}function b(t,e,n,o,r){if("className"===e&&(e="class"),"class"===e&&o&&"object"==typeof o&&(o=u(o)),"key"===e);else if("class"!==e||r)if("style"===e){if((!o||s(o)||s(n))&&(t.style.cssText=o||""),o&&"object"==typeof o){if(!s(n))for(var i in n)i in o||(t.style[i]="");for(var i in o)t.style[i]="number"!=typeof o[i]||K[i]?o[i]:o[i]+"px"}}else if("dangerouslySetInnerHTML"===e)o&&(t.innerHTML=o.__html);else if("o"==e[0]&&"n"==e[1]){var c=t._listeners||(t._listeners={});e=W(e.substring(2)),o?c[e]||t.addEventListener(e,w,!!G[e]):c[e]&&t.removeEventListener(e,w,!!G[e]),c[e]=o}else if("list"!==e&&"type"!==e&&!r&&e in t)_(t,e,null==o?"":o),null!=o&&o!==!1||t.removeAttribute(e);else{var l=r&&e.match(/^xlink\:?(.+)/);null==o||o===!1?l?t.removeAttributeNS("http://www.w3.org/1999/xlink",W(l[1])):t.removeAttribute(e):"object"==typeof o||a(o)||(l?t.setAttributeNS("http://www.w3.org/1999/xlink",W(l[1]),o):t.setAttribute(e,o))}else t.className=o||""}function _(t,e,n){try{t[e]=n}catch(t){}}function w(t){return this._listeners[t.type](L.event&&L.event(t)||t)}function S(t){if(g(t),t instanceof Element){t._component=t._componentConstructor=null;var e=t.normalizedNodeName||W(t.nodeName);(J[e]||(J[e]=[])).push(t)}}function E(t,e){var n=W(t),o=J[n]&&J[n].pop()||(e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t));return o.normalizedNodeName=n,o}function x(){for(var t;t=X.pop();)L.afterMount&&L.afterMount(t),t.componentDidMount&&t.componentDidMount()}function C(t,e,n,o,r,i){Y++||(Z=r instanceof SVGElement);var a=O(t,e,n,o);return r&&a.parentNode!==r&&r.appendChild(a),--Y||i||x(),a}function O(t,e,n,o){for(var r=e&&e.attributes;d(e);)e=h(e,n);if(null==e&&(e=""),s(e)){if(t){if(t instanceof Text&&t.parentNode)return t.nodeValue!=e&&(t.nodeValue=e),t;j(t)}return document.createTextNode(e)}if(a(e.nodeName))return R(t,e,n,o);var i=t,u=e.nodeName,c=Z,l=e.children;if(s(u)||(u=String(u)),Z="svg"===u||"foreignObject"!==u&&Z,t){if(!m(t,u)){for(i=E(u,Z);t.firstChild;)i.appendChild(t.firstChild);j(t)}}else i=E(u,Z);l&&1===l.length&&"string"==typeof l[0]&&1===i.childNodes.length&&i.firstChild instanceof Text?i.firstChild.nodeValue!=l[0]&&(i.firstChild.nodeValue=l[0]):(l&&l.length||i.firstChild)&&D(i,l,n,o);var f=i[$];if(!f){i[$]=f={};for(var p=i.attributes,v=p.length;v--;)f[p[v].name]=p[v].value}return N(i,e.attributes,f),r&&"function"==typeof r.ref&&(f.ref=r.ref)(i),Z=c,i}function D(t,e,n,o){var r,i,s,u,c=t.childNodes,l=[],f={},p=0,d=0,h=c.length,m=0,y=e&&e.length;if(h)for(var g=0;g<h;g++){var b=c[g],_=y?(i=b._component)?i.__key:(i=b[$])?i.key:null:null;_||0===_?(p++,f[_]=b):l[m++]=b}if(y)for(var g=0;g<y;g++){s=e[g],u=null;var _=s.key;if(null!=_)p&&_ in f&&(u=f[_],f[_]=void 0,p--);else if(!u&&d<m){for(r=d;r<m;r++)if(i=l[r],i&&v(i,s)){u=i,l[r]=void 0,r===m-1&&m--,r===d&&d++;break}!u&&d<m&&a(s.nodeName)&&o&&(u=l[d],l[d++]=void 0)}u=O(u,s,n,o),u&&u!==t&&u!==c[g]&&t.insertBefore(u,c[g]||null)}if(p)for(var g in f)f[g]&&j(f[g]);d<m&&A(l)}function A(t,e){for(var n=t.length;n--;)t[n]&&j(t[n],e)}function j(t,e){var n=t._component;n?M(n,!e):(t[$]&&t[$].ref&&t[$].ref(null),e||S(t),t.childNodes&&t.childNodes.length&&A(t.childNodes,e))}function N(t,e,n){for(var o in n)e&&o in e||null==n[o]||b(t,o,n[o],n[o]=void 0,Z);if(e)for(var r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||b(t,r,n[r],n[r]=e[r],Z)}function H(t){var e=t.constructor.name,n=tt[e];n?n.push(t):tt[e]=[t]}function T(t,e,n){var o=new t(e,n),r=tt[t.name];if(P.call(o,e,n),r)for(var i=r.length;i--;)if(r[i].constructor===t){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function I(t,e,n,o,r){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&L.syncComponentUpdates===!1&&t.base?f(t):k(t,1,r)),t.__ref&&t.__ref(t))}function k(t,e,n,i){if(!t._disable){var s,u,c,l,f=t.props,p=t.state,v=t.context,m=t.prevProps||f,g=t.prevState||p,b=t.prevContext||v,_=t.base,w=t.nextBase,S=_||w,E=t._component;if(_&&(t.props=m,t.state=g,t.context=b,2!==e&&t.shouldComponentUpdate&&t.shouldComponentUpdate(f,p,v)===!1?s=!0:t.componentWillUpdate&&t.componentWillUpdate(f,p,v),t.props=f,t.state=p,t.context=v),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!s){for(t.render&&(u=t.render(f,p,v)),t.getChildContext&&(v=o(r(v),t.getChildContext()));d(u);)u=h(u,v);var O,D,A=u&&u.nodeName;if(a(A)){c=E;var N=y(u);c&&c.constructor===A?I(c,N,1,v):(O=c,c=T(A,N,v),c.nextBase=c.nextBase||w,c._parentComponent=t,t._component=c,I(c,N,0,v),k(c,1,n,!0)),D=c.base}else l=S,O=E,O&&(l=t._component=null),(S||1===e)&&(l&&(l._component=null),D=C(l,u,v,n||!_,S&&S.parentNode,!0));if(S&&D!==S&&c!==E){var H=S.parentNode;H&&D!==H&&(H.replaceChild(D,S),O||(S._component=null,j(S)))}if(O&&M(O,D!==S),t.base=D,D&&!i){for(var R=t,P=t;P=P._parentComponent;)(R=P).base=D;D._component=R,D._componentConstructor=R.constructor}}!_||n?X.unshift(t):s||(t.componentDidUpdate&&t.componentDidUpdate(m,g,b),L.afterUpdate&&L.afterUpdate(t));var U,q=t._renderCallbacks;if(q)for(;U=q.pop();)U.call(t);Y||i||x()}}function R(t,e,n,o){for(var r=t&&t._component,i=t,a=r&&t._componentConstructor===e.nodeName,s=a,u=y(e);r&&!s&&(r=r._parentComponent);)s=r.constructor===e.nodeName;return r&&s&&(!o||r._component)?(I(r,u,3,n,o),t=r.base):(r&&!a&&(M(r,!0),t=i=null),r=T(e.nodeName,u,n),t&&!r.nextBase&&(r.nextBase=t,i=null),I(r,u,1,n,o),t=r.base,i&&t!==i&&(i._component=null,j(i))),t}function M(t,e){L.beforeUnmount&&L.beforeUnmount(t);var n=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var o=t._component;o?M(o,e):n&&(n[$]&&n[$].ref&&n[$].ref(null),t.nextBase=n,e&&(g(n),H(t)),A(n.childNodes,!e)),t.__ref&&t.__ref(null),t.componentDidUnmount&&t.componentDidUnmount()}function P(t,e){this._dirty=!0,this.context=e,this.props=t,this.state||(this.state={})}function U(t,e,n){return C(n,t,{},!1,e)}var L={},q=[],V={},W=function(t){return V[t]||(V[t]=t.toLowerCase())},B="undefined"!=typeof Promise&&Promise.resolve(),z=B?function(t){B.then(t)}:setTimeout,F={},$="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",K={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},G={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},Q=[],J={},X=[],Y=0,Z=!1,tt={};o(P.prototype,{linkState:function(t,e){var n=this._linkedStates||(this._linkedStates={});return n[t+e]||(n[t+e]=l(this,t,e))},setState:function(t,e){var n=this.state;this.prevState||(this.prevState=r(n)),o(n,a(t)?t(n,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),f(this)},forceUpdate:function(){k(this,2)},render:function(){}}),t.h=n,t.cloneElement=c,t.Component=P,t.render=U,t.rerender=p,t.options=L})},function(t,e,n){"use strict";function o(t){var e=t;return"string"==typeof t&&(e=function(){return t}),function(t){var n=t.className,o=t.style,r=t.onMouseEnter,i=t.onMouseDown,a=t.onMouseLeave;return(0,f.h)("div",l({dangerouslySetInnerHTML:{__html:e(t)}},{className:n,style:o,onMouseEnter:r,onMouseDown:i,onMouseLeave:a}))}}function r(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)}function i(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener(e,n)}function a(t,e){var n=void 0;if("object"==typeof t){if(n=Object.assign({},t),"object"==typeof e)for(var o in e)n[o]=a(t[o],e[o])}else n=e||t;return n}function s(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")}function u(t,e){if(!t)return function(t){return t};t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi"),o="<"+e+">$1</"+e+">";return function(t){return t.replace(n,o)}}function c(t,e){var n=!1,o=!1;return function(){var r=this,i=arguments;n?o=!0:(t.apply(r,i),n=!0,setTimeout(function(){n=!1,o&&t.apply(r,i),o=!1},e))}}e.__esModule=!0,e.throttle=e.normalizeQuery=e.mergeObjects=e.removeEvent=e.addEvent=e.getHighlightingFunc=e.convertToReactComponent=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=n(1);e.convertToReactComponent=o,e.getHighlightingFunc=u,e.addEvent=r,e.removeEvent=i,e.mergeObjects=a,e.normalizeQuery=s,e.throttle=c},function(t,e){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var r=typeof o;if("string"===r||"number"===r)t.push(o);else if(Array.isArray(o))t.push(n.apply(null,o));else if("object"===r)for(var i in o)o.hasOwnProperty(i)&&o[i]&&t.push(i)}}return t.join(" ")}function o(){return function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return{className:n(e).split(" ").map(function(t){return r+"-"+t}).join(" ")}}}e.__esModule=!0,e.default=o;var r="persoo"},function(t,e,n){var o,r,i;!function(n,a){r=[e,t],o=a,i="function"==typeof o?o.apply(e,r):o,!(void 0!==i&&(t.exports=i))}(this,function(t,e){"use strict";function n(t){var e=t&&(S&&t[S]||t[E]);if("function"==typeof e)return e}function o(t){function e(e,n,o,r,i,a){if(r=r||x,a=a||o,null==n[o]){var s=_[i];return e?new Error("Required "+s+" `"+a+"` was not specified in "+("`"+r+"`.")):null}return t(n,o,r,i,a)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function r(t){function e(e,n,o,r,i){var a=e[n],s=v(a);if(s!==t){var u=_[r],c=m(a);return new Error("Invalid "+u+" `"+i+"` of type "+("`"+c+"` supplied to `"+o+"`, expected ")+("`"+t+"`."))}return null}return o(e)}function i(){return o(w.thatReturns(null))}function a(t){function e(e,n,o,r,i){var a=e[n];if(!Array.isArray(a)){var s=_[r],u=v(a);return new Error("Invalid "+s+" `"+i+"` of type "+("`"+u+"` supplied to `"+o+"`, expected an array."))}for(var c=0;c<a.length;c++){var l=t(a,c,o,r,i+"["+c+"]");if(l instanceof Error)return l}return null}return o(e)}function s(){function t(t,e,n,o,r){if(!b.isValidElement(t[e])){var i=_[o];return new Error("Invalid "+i+" `"+r+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return o(t)}function u(t){function e(e,n,o,r,i){if(!(e[n]instanceof t)){var a=_[r],s=t.name||x,u=y(e[n]);return new Error("Invalid "+a+" `"+i+"` of type "+("`"+u+"` supplied to `"+o+"`, expected ")+("instance of `"+s+"`."))}return null}return o(e)}function c(t){function e(e,n,o,r,i){for(var a=e[n],s=0;s<t.length;s++)if(a===t[s])return null;var u=_[r],c=JSON.stringify(t);return new Error("Invalid "+u+" `"+i+"` of value `"+a+"` "+("supplied to `"+o+"`, expected one of "+c+"."))}return o(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function l(t){function e(e,n,o,r,i){var a=e[n],s=v(a);if("object"!==s){var u=_[r];return new Error("Invalid "+u+" `"+i+"` of type "+("`"+s+"` supplied to `"+o+"`, expected an object."))}for(var c in a)if(a.hasOwnProperty(c)){var l=t(a,c,o,r,i+"."+c);if(l instanceof Error)return l}return null}return o(e)}function f(t){function e(e,n,o,r,i){for(var a=0;a<t.length;a++){var s=t[a];if(null==s(e,n,o,r,i))return null}var u=_[r];return new Error("Invalid "+u+" `"+i+"` supplied to "+("`"+o+"`."))}return o(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function t(t,e,n,o,r){if(!h(t[e])){var i=_[o];return new Error("Invalid "+i+" `"+r+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return o(t)}function d(t){function e(e,n,o,r,i){var a=e[n],s=v(a);if("object"!==s){var u=_[r];return new Error("Invalid "+u+" `"+i+"` of type `"+s+"` "+("supplied to `"+o+"`, expected `object`."))}for(var c in t){var l=t[c];if(l){var f=l(a,c,o,r,i+"."+c);if(f)return f}}return null}return o(e)}function h(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(h);if(null===t||b.isValidElement(t))return!0;var e=n(t);if(!e)return!1;var o,r=e.call(t);if(e!==t.entries){for(;!(o=r.next()).done;)if(!h(o.value))return!1}else for(;!(o=r.next()).done;){var i=o.value;if(i&&!h(i[1]))return!1}return!0;default:return!1}}function v(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function m(t){var e=v(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function y(t){return t.constructor&&t.constructor.name?t.constructor.name:x}var g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,b={};b.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===g};var _={prop:"prop",context:"context",childContext:"child context"},w={thatReturns:function(t){return function(){return t}}},S="function"==typeof Symbol&&Symbol.iterator,E="@@iterator",x="<<anonymous>>",C={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:i(),arrayOf:a,element:s(),instanceOf:u,node:p(),objectOf:l,oneOf:c,oneOfType:f,shape:d};e.exports=C})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.default=void 0;var r=n(2),i=["keyDown","keyUp","resize","blur","focus"],a=function(){function t(e){o(this,t),this.inputSelector=e,this.inputElement=document.querySelector(this.inputSelector),this.inputElement||console.log('PersooAutocompleteInput: cannot find input element with selector "{$this.inputElementSelector}".')}return t.prototype.destroy=function(){unlistenToEvents()},t.prototype.listenToEvents=function(t){for(var e=i,n=Array.isArray(e),o=0,e=n?e:e[Symbol.iterator]();;){var a;if(n){if(o>=e.length)break;a=e[o++]}else{if(o=e.next(),o.done)break;a=o.value}var s=a;"resize"==s&&t[s]?(0,r.addEvent)(window,s.toLowerCase(),(0,r.throttle)(t[s],200)):(0,r.addEvent)(this.inputElement,s.toLowerCase(),t[s])}this.eventHandlers=t},t.prototype.unlistenToEvents=function(){for(var t=i,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var o;if(e){if(n>=t.length)break;o=t[n++]}else{if(n=t.next(),n.done)break;o=n.value}var a=o;"resize"==eventHandlers[a]?(0,r.removeEvent)(window,a.toLowerCase(),eventHandlers[a]):(0,r.removeEvent)(this.inputElement,a.toLowerCase(),eventHandlers[a])}},t.prototype.getDropdownPosition=function(){var t=this.inputElement.getBoundingClientRect(),e=Math.round(t.left+(window.pageXOffset||document.documentElement.scrollLeft)),n=Math.round(t.bottom+(window.pageYOffset||document.documentElement.scrollTop)),o=Math.round(t.right-t.left);return{top:n,left:e,width:o}},t.prototype.getValue=function(){return this.inputElement.value},t.prototype.setValue=function(t){this.inputElement.value=t},t}();e.default=a},function(t,e,n){"use strict";function o(t,e,n){function o(e){e=(0,r.normalizeQuery)(e),e!=t.getState().query&&(t.updateState({query:e}),a())}function a(){for(var e=t.getState(),o=e.options.datasets.length,r=e.query,i=0;i<o;i++){var a=e.datasets[i],c=n[i].get(r);if(a.searching)console.log('Omitting query "'+r+'".');else if(c)t.setDatasetState(i,{query:r}),s(i,c),console.log('Serving query "'+r+'" from cache');else{t.setDatasetState(i,{searching:!0,query:r});var l=u[i];e.options.datasets[i].source(r,l),console.log('Sending query "'+r+'".')}}}function s(e,o){var r=t.getState(),i=r.datasets[e].query,s=r.query;o=o||[],t.setDatasetState(e,{hits:o,searching:!1},{selectedDataset:null,selectedHit:null}),n[e].set(i,o),s!=i&&a()}for(var u=[],c=0;c<t.getState().datasets.length;c++)u.push(s.bind(this,c));return{onResizeAction:function(){var n=e.getDropdownPosition(),o=n.top,r=n.left,i=n.width,a=t.getState().options;t.updateState({dropdownTop:o+a.offsetTop,dropdownLeft:r+a.offsetLeft,dropdownWidth:a.width||i})},onFocusAction:function(){t.getState().options.openOnFocus&&t.updateState({dropdownIsVisible:!0})},onBlurAction:function(){t.getState().options.closeOnBlur&&t.updateState({dropdownIsVisible:!1})},onKeyDownAction:function(n){var o=window.event?n.keyCode:n.which;if((o==i.DOWN||o==i.UP)&&e.getValue())return o==i.DOWN?t.moveToNextHit():t.moveToPreviousHit(),!1;if(o==i.ESC)t.updateState({dropdownIsVisible:!1});else if(o==i.ENTER||o==i.TAB){var r=t.getSelectedHit();r&&t.getState().options.onSelect(r),t.updateState({dropdownIsVisible:!1})}},onKeyUpAction:function(n){var r=window.event?n.keyCode:n.which;if(console.log(r),!r||(r<35||r>40)&&r!=i.ENTER&&r!=i.ESC){var a=e.getValue();a.length>=t.getState().options.minChars?(o(a),t.updateState({dropdownIsVisible:!0})):t.updateState({dropdownIsVisible:!1})}},selectHitAction:function(e,n){t.updateState({selectedDataset:e,selectedHit:n})},clickHitAction:function(e,n){t.getState().options.onSelect(t.getSelectedHit()),t.updateState({selectedDataset:e,selectedHit:n,dropdownIsVisible:!1})}}}e.__esModule=!0,e.default=o;var r=n(2),i={TAB:9,ENTER:13,ESC:27,LEFT:37,RIGHT:39,UP:38,DOWN:40}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=n(1),c=n(4),l=o(c),f=n(3),p=o(f),d=n(2),h=(0,p.default)(),v=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.render=function(){var t=this.props,n=t.query,o=t.hits,r=t.selectedHit,i=t.datasetIndex,a=t.templates,c=t.cssClasses,l=t.selectHitAction,f=t.clickHitAction,p=e.defaultProps.templates,v=a.item||p.item,m=a.header||p.header,y=a.footer||p.footer,g=(0,d.getHighlightingFunc)(n,"b");return(0,u.h)("div",s({},h("autocompleteDataset__root","autocompleteDataset-"+i+"__root",{selected:r>=0}),{style:c.root}),m&&(0,u.h)(m,s({},h("autocompleteDataset__header","autocompleteDataset-"+i+"__header"),{query:n,isEmpty:!o||o.length<=0,style:c.header})),(0,u.h)("div",s({},h("autocompleteDataset__hits","autocompleteDataset-"+i+"__hits"),{style:c.hits}),o.map(function(t,e){return(0,u.h)(v,s({},h("autocompleteDataset__hits__hit","autocompleteDataset-"+i+"__hits__hit",{selected:r==e}),{key:t.objectID,hit:t,query:n,highlightQuery:g,style:c.hits__hit,onMouseEnter:r!=e&&l.bind(null,i,e),onMouseDown:f.bind(null,i,e)}))})),y&&(0,u.h)(y,s({},h("autocompleteDataset__footer","autocompleteDataset-"+i+"__footer"),{query:n,isEmpty:!o||o.length<=0,style:c.footer})))},e}(u.Component);v.propTypes={query:l.default.string,datasetIndex:l.default.number,hits:l.default.array,selectedHit:l.default.number,templates:{item:l.default.oneOfType([l.default.string,l.default.func]).isRequired,header:l.default.oneOfType([l.default.string,l.default.func]).isRequired,footer:l.default.oneOfType([l.default.string,l.default.func]).isRequired},cssClasses:l.default.object,selectHitAction:l.default.func,clickHitAction:l.default.func},v.defaultProps={templates:{item:function(t){return(0,u.h)("div",{style:{borderBottom:"1px solid #bbb",paddingBottom:"5px",marginBottom:"5px"}},JSON.stringify(t).slice(0,100),"...")},header:null,footer:null},cssClasses:{}},e.default=v},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=n(1),c=n(4),l=o(c),f=n(7),p=o(f),d=n(3),h=o(d),v=(0,h.default)(),m={position:"absolute","z-index":9999},y=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.render=function(){var t=this.props,e=t.offerID,n=t.locationID,o=t.autocompleteID,r=t.query,i=t.selectedDataset,a=t.selectedHit,c=t.datasetsOptions,l=t.datasetsState,f=t.selectHitAction,d=t.clickHitAction,h=t.isVisible,y=t.style,g=s({},v("autocompleteDropdown__root",e)),b=g.className;return b+=" persooLocation",h&&(0,u.h)("div",{id:o,className:b,style:Object.assign({},m,y),"data-offerID":e,"data-locationID":n,onMouseLeave:f.bind(null,null,null)},c.map(function(t,e){return(0,u.h)(p.default,s({hits:l[e].hits,selectedHit:i==e?a:-1,datasetIndex:e,templates:c[e].templates,cssClasses:c[e].cssClasses},{query:r,selectHitAction:f,clickHitAction:d}))}))},e}(u.Component);y.propTypes={autocompleteID:l.default.string,offerID:l.default.string,locationID:l.default.string,isVisible:l.default.boolean,datasetsOptions:l.default.array,datasetsState:l.default.array,selectedDataset:l.default.number,selectedHit:l.default.number,selectHitAction:l.default.func,clickHitAction:l.default.func,style:l.default.object},e.default=y},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0,e.default=void 0;var s=n(1),u=(n(14),n(10)),c=n(6),l=o(c),f=n(8),p=o(f),d=n(5),h=o(d),v=n(11),m=o(v);n(13).install();var y=function(t){function e(n){r(this,e);var o=i(this,t.call(this,n));return"undefined"==typeof n.options||"undefined"==typeof n.inputSelector?(console.warn("PersooAutocomplete(inputSelector, options) requires two arguments."),i(o)):(o.inputSelector=n.inputSelector,o.store=(0,u.createAutocompleteStore)((0,u.getInitialState)(n.options)),o.unsubcribe=o.store.subscribe(o._updateLocalStateFromStore.bind(o)),o)}return a(e,t),e.prototype._updateLocalStateFromStore=function(){this.setState(this.store.getState())},e.prototype._resetCaches=function(){this.caches=[];for(var t=0;t<this.store.getState().datasets.length;t++)this.caches.push(new m.default)},e.prototype.componentWillMount=function(){this._resetCaches(),this.inputConnector=new h.default(this.inputSelector),this.actions=(0,l.default)(this.store,this.inputConnector,this.caches),this.inputConnector.listenToEvents({keyDown:this.actions.onKeyDownAction,keyUp:this.actions.onKeyUpAction,resize:this.actions.onResizeAction,focus:this.actions.onFocusAction,blur:this.actions.onBlurAction}),this.actions.onResizeAction()},e.prototype.componentWillUnmount=function(){this.inputConnector.destroy()},e.prototype.render=function(){console.log("Re-rendering autocomplete.");var t=this.store.getState(),e=t.options,n=this.state,o=n.dropdownTop,r=n.dropdownLeft,i=n.dropdownWidth,a=n.dropdownIsVisible,u={top:o+"px",left:r+"px",width:i+"px"},c=e.cssClasses.root;return(0,s.h)(p.default,{autocompleteID:e.autocompleteID,offerID:e.offerID,locationID:e.locationID,isVisible:a&&(this.store.hasHits()||e.showEmptyResults),query:t.query,datasetsState:t.datasets,datasetsOptions:e.datasets,selectedDataset:t.selectedDataset,selectedHit:t.selectedHit,style:c?Object.assign({},c,u):u,selectHitAction:this.actions.selectHitAction,clickHitAction:this.actions.clickHitAction})},e}(s.Component);e.default=y},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t){var e={options:null,query:null,dropdownIsVisible:!1,dropdownTop:0,dropdownLeft:0,dropdownWidth:0,datasets:[],selectedDataset:null,selectedHit:null};e.options=Object.assign({},c,t);var n=e.options;n.datasets=n.datasets.map(function(t){return(0,u.mergeObjects)(l,t)});for(var o=function(t){var e=n.datasets[t];e.index=t,Object.keys(e.templates).map(function(t){e.templates[t]=(0,u.convertToReactComponent)(e.templates[t])})},r=0;r<n.datasets.length;r++)o(r);var i={hits:[],query:null,searching:!1};return n.datasets.forEach(function(t){return e.datasets.push(Object.assign({},i))}),e}function i(t){var e=(0,s.default)(t);return Object.assign(e,{hasHits:function(){var t=!1;return e.getState().datasets.forEach(function(e){e.hits&&e.hits.length>0&&(t=!0)}),t},getSelectedHit:function(){var t=e.getState(),n=t.selectedDataset,o=t.selectedHit,r=t.datasets;return null!=n&&null!=o?r[n].hits[o]:null},moveToNextHit:function(){if(this.hasHits()){var t=e.getState(),n=t.selectedDataset,o=t.selectedHit,r=t.datasets;for(null==n?(n=0,o=0):o++;o>=r[n].hits.length;)n=(n+1)%r.length,o=0;e.updateState({selectedDataset:n,selectedHit:o})}},moveToPreviousHit:function(){if(this.hasHits()){var t=e.getState(),n=t.selectedDataset,o=t.selectedHit,r=t.datasets;for(null==n?(n=r.length-1,o=r[n].hits.length-1):o--;o<0;)n=(n-1+r.length)%r.length,o=r[n].hits.length-1;e.updateState({selectedDataset:n,selectedHit:o})}},setDatasetState:function(t,n,o){var r=e.getState().datasets;for(var i in n)r[t][i]=n[i];e.updateState(Object.assign({datasets:r},o))}})}e.__esModule=!0,e.getInitialState=r,e.createAutocompleteStore=i;var a=n(12),s=o(a),u=n(2),c={minChars:1,showEmptyResults:!0,openOnFocus:!0,closeOnBlur:!1,datasets:[],offsetLeft:0,offsetTop:1,width:null,cssClasses:{},onSelect:function(t){console.log("persooAutocomplete: selected hit is "+JSON.stringify(t))},autocompleteID:"persooAutocomplete",offerID:"persooAutocomplete",locationID:"persooAutocomplete"},l={templates:{},cssClasses:{}}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(){n(this,t),this.store={}}return t.prototype.get=function(t){return this.store[t]},t.prototype.set=function(t,e){return this.store[t]=e,e},t.prototype.reset=function(){this.store={}},t}();e.default=o},function(t,e){"use strict";function n(t){function e(){o.forEach(function(t){return t()})}var n=t,o=[];return{getState:function(){return n},setState:function(t){n=t,e()},updateState:function(t){Object.assign(n,t),e()},subscribe:function(t){return o.push(t),function(){o.splice(o.indexOf(t),1)}}}}e.__esModule=!0,e.default=n},function(t,e){function n(){return"serviceWorker"in navigator&&(window.fetch||"imageRendering"in document.documentElement.style)&&("https:"===window.location.protocol||"localhost"===window.location.hostname)}function o(t){if(t||(t={}),n()){navigator.serviceWorker.register("/sw.js")}else;}function r(t,e){}e.install=o,e.applyUpdate=r},function(t,e,n){!function(e,o){t.exports=o(n(1))}(this,function(t){"use strict";function e(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,r=/(?:\?([^#]*))?(#.*)?$/,i=t.match(r),a={},s=void 0;if(i&&i[1])for(var u=i[1].split("&"),c=0;c<u.length;c++){var l=u[c].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=o(t.replace(r,"")),e=o(e||"");for(var f=Math.max(t.length,e.length),p=0;p<f;p++)if(e[p]&&":"===e[p].charAt(0)){var d=e[p].replace(/(^\:|[+*?]+$)/g,""),h=(e[p].match(/[+*?]+$/)||b)[0]||"",v=~h.indexOf("+"),m=~h.indexOf("*"),y=t[p]||"";if(!y&&!m&&(h.indexOf("?")<0||v)){s=!1;break}if(a[d]=decodeURIComponent(y),v||m){a[d]=t.slice(p).map(decodeURIComponent).join("/");break}}else if(e[p]!==t[p]){s=!1;break}return(n.default===!0||s!==!1)&&a}function n(t,e){var n=t.attributes||b,o=e.attributes||b;if(n.default)return 1;if(o.default)return-1;var i=r(n.path)-r(o.path);return i||n.path.length-o.path.length}function o(t){return i(t).split("/")}function r(t){return(i(t).match(/\/+/g)||"").length}function i(t){return t.replace(/(^\/+|\/+$)/g,"")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e;
}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){return x in t}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";w&&w[e]?w[e](t):"undefined"!=typeof history&&history[e+"State"]&&history[e+"State"](null,null,t)}function f(){var t=void 0;return t=w&&w.location?w.location:w&&w.getCurrentLocation?w.getCurrentLocation():"undefined"!=typeof location?location:E,""+(t.pathname||"")+(t.search||"")}function p(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),d(t)&&l(t,e?"replace":"push"),h(t)}function d(t){for(var e=S.length;e--;)if(S[e].canRoute(t))return!0;return!1}function h(t){for(var e=!1,n=0;n<S.length;n++)S[n].routeTo(t)===!0&&(e=!0);return e}function v(t){if(t&&t.getAttribute){var e=t.getAttribute("href"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return p(e)}}function m(t){if(0===t.button)return v(t.currentTarget||t.target||this),y(t)}function y(t){return t&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()),!1}function g(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey)){var e=t.target;do if("A"===String(e.nodeName).toUpperCase()&&e.getAttribute("href")&&c(e)){if(0!==t.button)return;if(v(e))return y(t)}while(e=e.parentNode)}}var b={},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},w=null,S=[],E={},x="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_";"function"==typeof addEventListener&&(addEventListener("popstate",function(){return h(f())}),addEventListener("click",g));var C=function(e){return t.h("a",_({},e,{onClick:m}))},O=function(t){function o(e){a(this,o);var n=s(this,t.call(this,e));return e.history&&(w=e.history),n.state={url:n.props.url||f()},n}return u(o,t),o.prototype.shouldComponentUpdate=function(t){return t.static!==!0||(t.url!==this.props.url||t.onChange!==this.props.onChange)},o.prototype.canRoute=function(t){return this.getMatchingChildren(this.props.children,t,!1).length>0},o.prototype.routeTo=function(t){return this._didRoute=!1,this.setState({url:t}),this.updating?this.canRoute(t):(this.forceUpdate(),this._didRoute)},o.prototype.componentWillMount=function(){S.push(this),this.updating=!0},o.prototype.componentDidMount=function(){this.updating=!1},o.prototype.componentWillUnmount=function(){S.splice(S.indexOf(this),1)},o.prototype.componentWillUpdate=function(){this.updating=!0},o.prototype.componentDidUpdate=function(){this.updating=!1},o.prototype.getMatchingChildren=function(t,o,r){return t.slice().sort(n).filter(function(t){var n=t.attributes,i=n.path,a=e(o,i,n);if(a){if(r!==!1){n.url=o,n.matches=a;for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])}return!0}})},o.prototype.render=function(t,e){var n=t.children,o=t.onChange,r=e.url,i=this.getMatchingChildren(n,r,!0),a=i[0]||null;this._didRoute=!!a;var s=this.previousUrl;return r!==s&&(this.previousUrl=r,"function"==typeof o&&o({router:this,url:r,previous:s,active:i,current:a})),a},o}(t.Component),D=function(e){var n=e.component,o=e.url,r=e.matches;return t.h(n,{url:o,matches:r})};return O.route=p,O.Router=O,O.Route=D,O.Link=C,O})}]);
//# sourceMappingURL=bundle.js.map